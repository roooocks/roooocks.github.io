---
title: "[Hook] useRef"
description: DOM의 직접 접근과 특정 값 유지
date: 2025-08-13 12:41:00 +0900
categories: [프론트엔드, React]
tags: [프론트엔드, React, React Hook]
---

**리액트를 다루는 기술(개정판)**을 참고했습니다.

## 설명
useRef는 "참조"를 다루며, 사용 용도가 2가지가 있다. <br>
이번 훅은 예제를 보여주면서 설명하는게 좋기 때문에 예제 코드에서 설명하겠다. <br>
아래 코드는 사용 방식만 짤막하게 적어놓은거다.

```jsx
// ref 선언
const inputEl = useRef(null);

// ref 설정
<input value={number} onChange={onChange} ref={inputEl} />

// 사용 방식
console.log(inputEl.current.value); // 값 가져오기
inputEl.current.focus(); // input 태그의 포커스 활성화
```
{: file='사용법' }

## 예제 코드

### DOM 요소에 접근
useRef의 가장 흔한 용도로, HTML 요소에 직접 접근할 수 있다. <br>
만약 useRef로 생성한 inputRef를 통해 DOM에 접근하려고 한다면 inputRef.current로 접근하면 된다.

```jsx
import React, { useState, useMemo, useCallback, useRef } from 'react';

const getAverage = (numbers) => {
  console.log('평균값 계산 중..');

  if (numbers.length === 0)
    return 0;

  const sum = numbers.reduce((a, b) => a + b);
  return sum / numbers.length;
};

const Average = () => {
  // variable
  const [list, setList] = useState([]);
  const [number, setNumber] = useState('');
  const inputEl = useRef(null);

  // event
  const onChange = useCallback(e => {
    setNumber(e.target.value);
  }, []);

  const onInsert = useCallback(e => {
    const nextList = list.concat(parseInt(number));
    setList(nextList);
    setNumber('');
    inputEl.current.focus(); // input 포커스!
  }, [list, number]);

  // memo
  const avg = useMemo(() => getAverage(list), [list]);

  return (
    <div>
      <input type="number" value={number} onChange={onChange} ref={inputEl} />
      <button onClick={onInsert}>등록</button>
      <ul>
        {
          list.map((value, index) => (
            <li key={index}>{value}</li>
          ))
        }
      </ul>
      <div>
        <b>평균값:</b> {avg}
      </div>
    </div>
  );
};

export default Average;
```
{: file='DOM 접근 예제' }

### 렌더링과 상관없이 값 저장
useRef는 <ins>컴포넌트의 리렌더링이 일어나</ins>도 <ins>값이 초기화되지 않고 **유지**</ins>된다는 특징이 있다. <br>
useState는 상태 값이 변경되면 리렌더링 되는데, 이것과는 정반대의 특징이다. <br>
때문에 아래와 같은 상황에서 유용하게 사용이 가능하다.
 - 이전 상태 값과 현재 상태 값을 비교할 때
 - 복잡한 객체를 한 번만 생성하고 쭉 재사용하고 싶을 때

```jsx
import React, { useRef } from 'react';

const RefSample = () => {
  const id = useRef(1);
  const setId = () => {
    id.current += 1;

    console.log(`ID 증가 = ${id.current}`);
  }
  const printId = () => {
    console.log(`다음 아이디 = ${(id.current + 1)}`);
  }

  return (
    <div>
      <button onClick={setId}>ID 증가</button>
      <button onClick={printId}>다음 ID 확인</button>
      <p>{id.current}</p>
    </div>
  );
}
```
{: file='렌더링과 상관없이 값 저장 예제' }