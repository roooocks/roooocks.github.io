---
title: FormData
description: form 데이터를 JS에서 자유자제로
date: 2025-10-18 14:34:52 +0900
categories: [프론트엔드, JS/TS]
tags: [프론트엔드, JS]
---

## 출처
- [MDN](https://developer.mozilla.org/ko/docs/Web/API/FormData)
- 블로그
  - [FormData 사용법 & 응용 총정리(+ fetch 전송)](https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-FormData-%EC%A0%95%EB%A6%AC-fetch-api#formdata%EB%8A%94_%EC%96%B8%EC%A0%9C_%ED%99%9C%EC%9A%A9%EB%90%98%EB%8A%94%EA%B0%80)
  - [FormData 객체](https://ko.javascript.info/formdata)
  - [javascript FormData 사용 방법](https://shan0325.tistory.com/12)
- 예제
  - 제미니 API
  - 인프런 강의 **타입스크립트로 배우는 리액트(React.js) : 기초부터 최신 기술까지 완벽하게**


## 정의
이름 그대로 <ins>form 태그 내에서 다루는 데이터를 처리/조작/전송할 때 사용하는 객체</ins>다. <br>
나의 경우에는 React 공부하다가 나와서 처음 접하게 되었다.


## 함수
지금 적는건 그래도 좀 사용할 것 같은 것만 적었다. <br>
실제로는 함수가 더 있으므로 그때마다 MDN 뒤적이면서 활용하자.
```js
const formData = new FormData();

// 데이터(필드) 추가
formData.append(name, value); // 파일이 아니면 value는 무조건 문자열로 변환
formData.append(name, value, fileName);

// 데이터(필드) 제거
formData.delete(name);

// 데이터(필드) 값 반환
formData.get(name);

// 데이터(필드)들의 값 배열로 반환
formData.getAll(name); // 보통 checkbox 같은 타입 등의 값을 가져올 때 유용

// 데이터(필드) 유무 체크
formData.has(name); // 반환 타입 bool
```
{: file='자주 쓸 것 같은 함수들' }


## 사용 예제

### JS
```js
/// 1. HTML의 form 데이터 가져오기
// 폼 내부에 있는 <input>, <select>, <textarea> 등의 데이터(name과 value)가 자동으로 포함됩니다.
const formElement = document.getElementById('myForm');
const formData = new FormData(formElement);

/// 2. 빈 객체로 생성 후 데이터 추가
const formData = new FormData();

// 일반 데이터 추가
formData.append('username', 'Chris');
formData.append('age', 30);

// 파일 데이터 추가 (파일 input에서 가져온 File 객체)
const fileInput = document.getElementById('file-input');
if (fileInput.files.length > 0) {
    formData.append('profileImage', fileInput.files[0], 'my_profile.jpg');
}
```
{: file='JS에서의 2가지 예제' }

### React
```ts
const UserInfoForm = () => {
  const formRef = useRef<HTMLFormElement>(null);
  const nameRef = useRef<HTMLInputElement>(null);

  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();

    if (formRef.current) {
      const formData = new FormData(formRef.current);
      const name = formData.get("name");
      const email = formData.get("email");
      const gender = formData.get("gender");
      const skills = formData.getAll("skills"); // checkbox 타입 등에 유용
      const bio = formData.get("bio");

      if (name === "") {
        alert("이름을 작성해주세요.");
        nameRef.current!.focus(); // 있을 경우에 포커스
        return;
      }

      console.log({ name, email, gender, skills, bio });
    }
  };

  ...(생략)
}
```
{: file='내가 처음 접한 FormData 예제' }


## 전송 방식
블로그 작성하다보니 궁금해져서 적는다. <br>
테스트는 하기 귀찮아서 방식만 적는거라 틀리면 수정하자...

### XMLHttpRequest.send()
```js
const formData = new FormData(/* ... FormData 객체 생성 ... */);
const targetUrl = '/api/submit-form';

const xhr = new XMLHttpRequest();

// 1. 요청 완료 시 실행될 이벤트 리스너 설정
xhr.onload = function() {
  if (xhr.status >= 200 && xhr.status < 300) {
    console.log('서버 응답 성공:', xhr.responseText);
  } else {
    console.error('요청 실패. 상태 코드:', xhr.status);
  }
};

xhr.onerror = function() {
  console.error('네트워크 오류 발생');
};

// 2. 요청 초기화 (메서드와 URL 설정)
xhr.open('POST', targetUrl);

// **중요**: fetch와 마찬가지로, FormData를 보낼 때는 Content-Type을 수동으로 설정하면 안 됩니다.
// 브라우저가 send() 시 자동으로 'multipart/form-data'와 경계선(boundary)을 추가합니다.

// 3. 요청 전송
xhr.send(formData);
```
{: file='XMLHttpRequest 방식' }

### fetch API
```js
const formData = new FormData(/* ... FormData 객체 생성 ... */);
const targetUrl = '/api/submit-form';

fetch(targetUrl, {
  method: 'POST', // 데이터 전송이므로 POST를 사용합니다.
  body: formData  // FormData 객체를 body에 직접 넣습니다.
  // **중요**: Content-Type 헤더는 자동으로 'multipart/form-data'로 설정됩니다.
})
.then(response => {
  if (!response.ok) {
    throw new Error(`HTTP error! status: ${response.status}`);
  }
  return response.json(); // 서버 응답이 JSON이라면 파싱합니다.
})
.then(data => {
  console.log('서버 응답 성공:', data);
})
.catch(error => {
  console.error('전송 중 오류 발생:', error);
});
```
{: file='fetch의 방식' }
